% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sops.R
\name{secrets_encrypt}
\alias{secrets_encrypt}
\title{Encrypt secrets using SOPS}
\usage{
secrets_encrypt(lockbox = NULL, secrets = NULL, public = NULL, private = NULL)
}
\arguments{
\item{lockbox}{Character string, path to the encrypted file to create/update}

\item{secrets}{Named list of secrets to encrypt (keys become variable names)}

\item{public}{Character vector of age public keys (required for new files)}

\item{private}{Character string, path to private key file (required for updates, can be password-protected age file)}
}
\value{
Invisible NULL
}
\description{
Creates or updates a SOPS-managed and age-encrypted file with secrets. For new files,
requires public age keys. For existing files, requires the private key
to decrypt and re-encrypt with new secrets merged in.
}
\examples{
\dontrun{
# Generate a key pair
key <- key_generate.R("private.key")

# Create new encrypted lockbox file
secrets <- list(
  API_KEY = "your-api-key-here",
  DATABASE_URL = "postgresql://user:pass@host:5432/db",
  AWS_ACCESS_KEY_ID = "AKIAIOSFODNN7EXAMPLE"
)
secrets_encrypt(
  lockbox = "lockbox.yaml",
  secrets = secrets,
  public = key$public
)

# Update existing lockbox file
secrets_encrypt(
  lockbox = "lockbox.yaml",
  secrets = list(API_KEY = "a-new-api-key"),
  private = "private.key"
)
}
}
